<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Hotel Completo</title>
    <style>
        /* ESTILOS CSS (Para deixar visualmente organizado) */
        body { font-family: sans-serif; padding: 20px; }
        /* .box: Classe gen√©rica para as caixas de contorno */
        .box { padding: 15px; border: 2px solid; margin-bottom: 15px; border-radius: 8px; }
        
        /* Cores espec√≠ficas para cada √°rea */
        .cinza { border-color: #666; background-color: #f9f9f9; }
        .azul { border-color: #007bff; background-color: #f0f8ff; }
        .laranja { border-color: #ff9800; background-color: #fff8e1; }
        
        h3 { margin-top: 0; }
        ul { border-bottom: 1px solid #ccc; padding-bottom: 10px; }
    </style>
</head>
<body>
    <h1>üè® Hotel Beira-Mar (Sistema Completo)</h1>

    <div class="box cinza">
        <h3>1. Construir Quarto (Cadastro)</h3>
        <input id="numQuarto" placeholder="N√∫mero (ex: 101)">
        <select id="tipoQuarto">
            <option value="simples">Simples (R$ 100)</option>
            <option value="luxo">Luxo (R$ 250)</option>
        </select>
        <button onclick="cadastrarQuarto()">Construir</button>
    </div>

    <div class="box azul">
        <h3>2. Check-in (Entrada)</h3>
        <p>H√≥spede chegou? Escolha o quarto:</p>
        <input id="buscaNumero" placeholder="N√∫mero do quarto">
        <input id="nomeHospede" placeholder="Nome do H√≥spede">
        <button onclick="fazerCheckin()">Realizar Check-in</button>
    </div>

    <div class="box laranja">
        <h3>3. Check-out (Sa√≠da e Pagamento)</h3>
        <p>H√≥spede saindo? Libere o quarto:</p>
        <input id="saidaNumero" placeholder="N√∫mero do quarto">
        <button onclick="fazerCheckout()">Fechar Conta</button>
    </div>

    <div style="display: flex; gap: 20px;">
        <div style="flex: 1;">
            <h3>üõèÔ∏è Quartos Ocupados (Agora)</h3>
            <ul id="listaOcupados"></ul>
        </div>
        
        <div style="flex: 1; color: gray;">
            <h3>üí∞ Hist√≥rico (J√° sa√≠ram)</h3>
            <ul id="listaHistorico"></ul>
        </div>
    </div>

    <script>
        // ==========================================================
        // 1. MODELO (A Classe Quarto)
        // Define o que √© um quarto e suas regras de pre√ßo
        // ==========================================================
        class Quarto {
            constructor(numero, tipo) {
                this.numero = numero; // Ex: 101
                this.tipo = tipo;     // Ex: 'simples' ou 'luxo'
                
                // Define o pre√ßo automaticamente baseado no tipo
                // Operador Tern√°rio: (Teste) ? ValorSeVerdadeiro : ValorSeFalso
                this.valorDiaria = (tipo === "luxo") ? 250 : 100;
            }
        }

        // ==========================================================
        // 2. O SISTEMA (Gerenciamento do Hotel)
        // ==========================================================
        class Hotel {
            quartosCadastrados = []; // LISTA 1: Invent√°rio (Os quartos f√≠sicos que existem)
            ocupacoes = [];          // LISTA 2: Ocupados (Quem est√° dormindo l√° agora)
            historico = [];          // LISTA 3: Hist√≥rico (Quem j√° pagou e foi embora)

            // --- FUNCIONALIDADE A: CADASTRAR QUARTO ---
            cadastrar(novoQuarto) {
                // Adiciona o objeto quarto na lista de quartos existentes
                this.quartosCadastrados.push(novoQuarto);
                alert(`Quarto ${novoQuarto.numero} constru√≠do!`);
            }

            // --- FUNCIONALIDADE B: CHECK-IN (Entrada) ---
            fazerCheckin(numeroQuarto, nomePessoa) {
                // 1. VALIDA√á√ÉO: O quarto existe fisicamente?
                // Procura na lista 'quartosCadastrados'
                let quartoReal = this.quartosCadastrados.find(q => q.numero === numeroQuarto);
                
                // Se n√£o achou (undefined), para tudo.
                if (!quartoReal) { alert("Quarto n√£o existe! Cadastre primeiro."); return; }

                // 2. VALIDA√á√ÉO: O quarto j√° est√° ocupado?
                // Procura na lista 'ocupacoes' se tem algu√©m nesse n√∫mero de quarto
                let jaOcupado = this.ocupacoes.find(oc => oc.quarto.numero === numeroQuarto);
                
                // Se achou algu√©m, impede a entrada.
                if (jaOcupado) { alert("Quarto j√° est√° ocupado!"); return; }

                // 3. REGISTRO: Cria o objeto da estadia
                let ocupacao = {
                    quarto: quartoReal,   // Guarda o objeto do quarto inteiro
                    hospede: nomePessoa,  // Nome da pessoa
                    entrada: new Date(),  // Hora que entrou (agora)
                    saida: null,          // Hora que saiu (ainda n√£o saiu)
                    totalPago: 0          // Valor final (ainda √© 0)
                };

                // Adiciona na lista de ocupados
                this.ocupacoes.push(ocupacao);
                
                // Atualiza o HTML
                this.atualizarTela();
            }

            // --- FUNCIONALIDADE C: CHECK-OUT (Sa√≠da) ---
            fazerCheckout(numeroQuarto) {
                // 1. BUSCA: Acha a ocupa√ß√£o ativa desse quarto pelo n√∫mero
                // findIndex retorna a posi√ß√£o (0, 1, 2...) na lista. Se n√£o achar, retorna -1.
                let index = this.ocupacoes.findIndex(oc => oc.quarto.numero === numeroQuarto);
                
                // Se n√£o tiver ningu√©m l√°, avisa erro.
                if (index === -1) { alert("Ningu√©m est√° ocupando este quarto agora."); return; }

                // Pega o registro usando o √≠ndice encontrado
                let registro = this.ocupacoes[index];

                // 2. C√ÅLCULO: Marca sa√≠da e calcula pre√ßo
                registro.saida = new Date(); // Marca hora de agora
                
                // --- TRUQUE DE SIMULA√á√ÉO ---
                // Calculamos a diferen√ßa em milissegundos e dividimos por 1000 para ter segundos.
                // Fingimos que 1 segundo = 1 di√°ria para voc√™ conseguir testar r√°pido.
                let segundos = (registro.saida - registro.entrada) / 1000;
                
                // Arredonda para cima (Math.ceil). Se ficou 0.1s, cobra 1 di√°ria.
                let dias = Math.ceil(segundos);
                if(dias < 1) dias = 1; // Garante m√≠nimo de 1 di√°ria

                // Multiplica dias pelo valor do quarto (100 ou 250)
                registro.totalPago = dias * registro.quarto.valorDiaria;

                // 3. MOVER: Joga esse registro para a lista de Hist√≥rico (Arquivo Morto)
                this.historico.push(registro);

                // 4. REMOVER: Tira da lista de Ocupados (Libera o quarto para outro)
                this.ocupacoes.splice(index, 1);

                alert(`Conta fechada! Valor: R$ ${registro.totalPago.toFixed(2)}`);
                this.atualizarTela();
            }

            // --- FUNCIONALIDADE D: ATUALIZAR TELA ---
            atualizarTela() {
                // Pega os elementos <ul> do HTML
                let listaO = document.getElementById("listaOcupados");
                let listaH = document.getElementById("listaHistorico");
                
                // Limpa o conte√∫do antigo
                listaO.innerHTML = "";
                listaH.innerHTML = "";

                // LOOP 1: Preenche a lista de Ocupados
                this.ocupacoes.forEach(oc => {
                    listaO.innerHTML += `<li>Quarto ${oc.quarto.numero} (${oc.quarto.tipo}) - ${oc.hospede}</li>`;
                });

                // LOOP 2: Preenche a lista de Hist√≥rico
                this.historico.forEach(oc => {
                    listaH.innerHTML += `
                        <li>
                            ‚úÖ <strong>Quarto ${oc.quarto.numero}</strong> (${oc.hospede})
                            <br> Pago: R$ ${oc.totalPago.toFixed(2)}
                        </li>`;
                });
            }
        }

        // ==========================================================
        // 3. INICIALIZA√á√ÉO (Conex√£o com Bot√µes HTML)
        // ==========================================================
        
        // Inicia o sistema
        const sistema = new Hotel();

        // Bot√£o Construir
        function cadastrarQuarto() {
            let num = document.getElementById("numQuarto").value;
            let tipo = document.getElementById("tipoQuarto").value;
            // Cria novo quarto e manda pro sistema
            sistema.cadastrar(new Quarto(num, tipo));
        }

        // Bot√£o Check-in
        function fazerCheckin() {
            let num = document.getElementById("buscaNumero").value;
            let nome = document.getElementById("nomeHospede").value;
            // Manda fazer check-in
            sistema.fazerCheckin(num, nome);
            // Limpa o campo de nome
            document.getElementById("nomeHospede").value = "";
        }

        // Bot√£o Check-out
        function fazerCheckout() {
            let num = document.getElementById("saidaNumero").value;
            // Manda fazer check-out
            sistema.fazerCheckout(num);
            // Limpa o campo
            document.getElementById("saidaNumero").value = "";
        }
    </script>
</body>
</html>